# Intellegent Placer
## Постановка задачи

Необходимо по фотографии, на которой расположены один или несколько предметов и белый лист с нарисованным многоугольником, определить, помещаются ли предметы в заданный многоугольник. 

### Вход\Выход
- Вход - фотография в формате .jpg, на которой изображён предмет(-ы) на светлом однотонном фоне и белый лист с нарисованным многоугольником.
- Выход - строка в формате [Имя входной фотографии][Ответ]. В случае успеха расположения: Ответ=True, иначе: Ответ=False. Так-же Ответ=Error описывает ситуацию, в которой входное изображение не удовлетворяет требованиям.

## Требования

### Общие требования к фотографиям
- Файл в формате .jpg
- Фотографии без наложения каких-либо фильтров.
- Фотографии сделаны в перпендикулярном направлении к плоскости, угол наклона не больше 10 градусов.
- Фотографии сделаны на одно устройство с одинаковым освещением.
- Объекты имеют чёткую границу, а их тени имеют малую интенсивность.

### Требования к предметам
- Предметы явно выделены относительно поверхности и белого листа бумаги.
- Предметы не могут пересекаться и иметь общих границ(расстояние не меньше 5мм).
- Предметы могут быть представлены в единственном экземпляре.
- Предметы помещаются на лист бумаги формата A4.

### Требования к поверхности
- Поверхность должна быть ровной, однородной и горизонтальной.
- Для всех фотографий используется одна и та же поверхность.

### Требования к исходным данным
- Предметы расположены в центре белого листа бумаги формата А4.
- Края листа отчётливо видны на фотографии.
- Исходные данные содержат 10 фотографий, на каждой по одному различному предмету.

### Требования ко входным данным
- Изображение содержит только заранее известные предметы и многоугольник.
- Многоугольник расположен выше всего набора предметов и не пересекается с ними.
- Многоугольник нарисован на белом листе формата A4 с толщиной менее 5мм.
- Многоугольник является выпуклым.
- На изображении может находиться только 1 многоугольник.
- На изображении находится минимум 1 предмет.

## Набор данных

Изображения исходных объектов доступны по [ссылке](https://drive.google.com/drive/folders/1_Az5gIQZRQkBOXIJTfX5e9_Pgxa7kO-a?usp=sharing)

Примеры входных данных расположены в папках "true" , "false" , "error" , в соответствии с ожидаемым результатом работы алгоритма, доступны по следующей [ссылке](https://drive.google.com/drive/folders/11lU9_B2_3u90xtG1A0672gMMpnqoJw9J?usp=sharing).
Так-же в каждой папке присутствует описание для каждой фотографии

## План решения задачи

### Обработка исходных данных
- Предобработка изображения(сглаживание с фильтром Гаусса).
- Бинаризация изображения с помощью threshold_otsu.
- Использование нужных морфологических операций для устранения шумов.
- Анализ компонент связности по полученной маске.
- Наложение полученной маски на исходное изображение.
- Поиск особых точек(Детектор Харриса) и их дескрипторов.

### Обработка входных данных
- Предобработка изображения(сглаживание с фильтром Гаусса).
- Поиск границ с помощью детектора Canny.
- Использование нужных морфологических операций для устранения шумов.
- Определить многоугольник, как объект, расположенный выше остальных.
- Поиск особых точек(Детектор Харриса) и их дескрипторов.
- Распознать объекты на изображении путем сравнения особых точек, с особыми точками предметов в исходных данных.

### Размещение объектов в многоугольник
- В случае, если на изображении присутствует ровно один многоугольник, удовлетворяющий требованиям, и хотя бы один предмет, то перейти к следующему пункту. Иначе -  вернуть Error.
- В случае, если сумма площадей объектов на входном изображении больше, чем площадь многоугольника - вернуть False. Иначе, перейти к следующему пункту.
- Перенос объектов
   - Отсортируем предметы по их площади от большего к меньшему.
   - Начинаем поочерёдно проходить маску многоуголька масками предметов. Для каждого шага будем поворачивать предмет на 360 градусов с шагом в 5 градусов. Используем битовую операцию AND для поиска областей, в которых они пересекаются. Для укладки предметов используем битовую операцию XOR. В случает успешного переноса - вернуть   True.



 
